# Architecture Overview

This document provides a high‑level overview of the **BaZiEngine_v0_2** project structure, key components, and data flow.

## Repository Structure
```
BaZiEngine_v0_2/
├─ bazi_engine/          # Core engine package
│   ├─ __init__.py
│   ├─ constants.py
│   ├─ interpretation.py
│   ├─ western.py
│   └─ ...
├─ tests/                # Unit tests
├─ Dockerfile
├─ pyproject.toml
└─ README.md
```

## Major Components
- **`bazi_engine` package**: Implements BaZi calculations, Western astrology utilities, and interpretation logic.
- **`constants.py`**: Holds static data such as zodiac signs, elements, and mapping tables.
- **`interpretation.py`**: Functions that translate raw astrological data into human‑readable interpretations.
- **`western.py`**: Provides Western astrology calculations (e.g., house positions, planetary aspects).
- **Tests**: Verify correctness of calculations and edge‑case handling.

## Data Flow
1. **Input** – User provides birth date, time, and location.
2. **Parsing** – Input is parsed and converted to a Julian Day Number.
3. **Computation** – Engine computes BaZi pillars and Western planetary positions.
4. **Interpretation** – Results are passed to interpretation functions to generate textual output.
5. **Output** – Structured JSON and formatted strings are returned to the caller.

## Interfaces
- **Public API** – Functions exported in `bazi_engine/__init__.py` such as `calculate_bazi`, `calculate_western`.
- **CLI / Web** – Not present in this repository but can be built on top of the public API.

## Error Handling
- Validation errors raise `ValueError` with descriptive messages.
- Calculation errors are caught and re‑raised as `CalculationError` (custom exception defined in `bazi_engine/exceptions.py`).

---
*Generated by Antigravity AI assistant.*
